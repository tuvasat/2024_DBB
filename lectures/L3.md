### Введение в NoSQL

#### Что такое NoSQL?

**NoSQL** (Not Only SQL) — это тип баз данных, который отличается от традиционных реляционных баз данных. NoSQL системы разработаны для работы с большими объемами данных, высокой скоростью обработки запросов и поддерживают горизонтальное масштабирование.

Примером NoSQL базы данных может быть **MongoDB** — документная база данных, которая хранит данные в формате JSON-подобных документов (BSON).

### Пример использования MongoDB:

Допустим, нужно хранить информацию о пользователях в системе. В реляционной базе данных для этого потребуется несколько таблиц (пользователи, адреса, навыки и т.д.). В MongoDB же можно хранить все данные о пользователе в одном документе, который может иметь разную структуру для разных пользователей.

#### Пример документа пользователя в MongoDB:

json
```json
{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "age": 28,
  "address": {
    "street": "123 Main St",
    "city": "Somewhere",
    "zipcode": "12345"
  },
  "skills": ["Java", "Python", "MongoDB"],
  "isActive": true
}
``` 

Этот документ включает информацию о пользователе, его адрес и список навыков. MongoDB позволяет легко добавлять или изменять поля без необходимости изменять структуру данных. Например, можно добавить новое поле для другого пользователя без проблем:

json
```json
{
  "name": "Jane Smith",
  "email": "jane.smith@example.com",
  "age": 32,
  "skills": ["JavaScript", "Node.js"],
  "isActive": false,
  "hobbies": ["Photography", "Traveling"]
}
``` 

Здесь у другого пользователя есть дополнительное поле **hobbies** ("увлечения"), но это не требует изменения всей структуры базы данных.

MongoDB также поддерживает быстрые запросы, такие как выборка пользователей по возрасту:

js
```js
db.users.find({ "age": { $gt: 25 } })
``` 

Этот запрос вернет всех пользователей, чей возраст больше 25 лет.


### Основные отличия NoSQL от реляционных баз данных:

-   **Гибкая схема**: Нет жесткой структуры таблиц и полей, как в реляционных базах. Это позволяет хранить данные с разными атрибутами без изменения структуры.
-   **Масштабируемость**: NoSQL системы поддерживают горизонтальное масштабирование (добавление серверов для повышения производительности), тогда как реляционные базы чаще используют вертикальное масштабирование (улучшение одного сервера).
-   **Производительность**: NoSQL базы часто обеспечивают более высокую производительность для операций чтения и записи за счет использования распределенных систем хранения.

#### Основные типы NoSQL баз данных:

-   **Документные базы данных** (MongoDB, CouchDB)
-   **Ключ-значение** (Redis, DynamoDB)
-   **Колоночные базы данных** (Cassandra, HBase)
-   **Графовые базы данных** (Neo4j, ArangoDB)

#### Преимущества и недостатки NoSQL:

-   **Преимущества**: Высокая производительность, гибкость, горизонтальное масштабирование.
-   **Недостатки**: Нет универсального языка запросов, сложность обеспечения транзакционной согласованности.

### Классификация NoSQL баз данных
Классификация NoSQL баз данных основана на различных моделях хранения и структурирования данных. Вот основные типы NoSQL баз данных:

#### 1. **Документные базы данных**

Документные базы данных хранят данные в виде документов, обычно в формате JSON, BSON, XML или других структурированных форматов. Каждый документ содержит набор пар "ключ-значение", и документы могут иметь разную структуру в пределах одной коллекции (аналог таблицы в SQL).

-   **Примеры**: MongoDB, CouchDB
-   **Когда использовать**: Когда нужно хранить данные с гибкой структурой, например, профили пользователей, блоги, каталоги товаров.

#### 2. **Ключ-значение базы данных**

Базы данных типа "ключ-значение" хранят данные в виде пар ключ-значение, где ключ — это уникальный идентификатор, а значение может быть любым типом данных. Эта модель очень проста и эффективна для быстрых операций чтения и записи.

-   **Примеры**: Redis, DynamoDB, Riak
-   **Когда использовать**: Подходит для приложений с быстрым доступом к данным, таких как кэширование, управление сессиями, очереди задач.

#### 3. **Графовые базы данных**

Графовые базы данных используют графы для представления и хранения данных. В этих базах узлы (вершины) представляют объекты, а ребра — отношения между этими объектами. Графовые базы данных особенно эффективны для моделирования сложных взаимосвязей между данными.

-   **Примеры**: Neo4j, ArangoDB, OrientDB
-   **Когда использовать**: Подходит для приложений, где важны связи между объектами, таких как социальные сети, рекомендательные системы, графы знаний.

### Документные базы данных

#### Что такое документная база данных?

Документная база данных — это NoSQL база данных, которая хранит данные в виде документов. Документами могут быть объекты в формате JSON, BSON, XML или других форматов. Каждый документ — это независимая запись, содержащая как данные, так и метаданные.

#### Пример документной базы данных: MongoDB

MongoDB — одна из самых популярных документных баз данных. Она использует JSON-подобный формат данных (BSON), что позволяет хранить данные с разной структурой в одном и том же наборе.

##### Пример документа в MongoDB:

json
```json
{
  "name": "Alice",
  "age": 30,
  "address": {
    "street": "Main St",
    "city": "Wonderland"
  },
  "skills": ["JavaScript", "Python", "MongoDB"]
}
``` 

Этот документ хранит информацию о человеке: имя, возраст, адрес и список навыков. В отличие от реляционных баз данных, нам не нужно создавать отдельные таблицы для адреса или навыков — все данные хранятся в одном месте.

#### Основные операции в документных базах данных:

-   **Создание**: Добавление нового документа в коллекцию (аналог таблицы в SQL).
-   **Чтение**: Запросы на получение документов.
-   **Обновление**: Изменение существующих документов.
-   **Удаление**: Удаление документов из базы.

##### Пример операции в MongoDB:

-   **Вставка нового документа**:

js
```js
db.users.insert({
  "name": "Alice",
  "age": 30,
  "address": {
    "street": "Main St",
    "city": "Wonderland"
  }
})
```

-   **Запрос всех документов**:

js
```json
db.users.find()
```

-   **Запрос документов с фильтрацией**:

js
```js
db.users.find({ "age": { $gt: 25 } })
```

-   **Обновление документа**:

js
```js
db.users.update(
  { "name": "Alice" },
  { $set: { "age": 31 } }
)
```

-   **Удаление документа**:

js
```js
db.users.remove({ "name": "Alice" })
```

#### Преимущества документных баз данных:

-   **Гибкость**: Позволяют хранить данные с разной структурой.
-   **Простота в использовании**: JSON-подобные форматы легко читаются и редактируются.
-   **Масштабируемость**: Поддерживают горизонтальное масштабирование.

#### Когда использовать документные базы данных?

Документные базы данных особенно полезны, когда нужно работать с данными, которые имеют динамическую или изменяющуюся структуру. 

Например:
-   Хранение профилей пользователей с разным набором полей.
-   Логирование событий в системах, где структура логов может варьироваться.
-   Системы управления контентом (CMS), где каждый документ может быть уникальным.

### Заключение

В этой лекции мы рассмотрели, что такое NoSQL базы данных, их основные типы и преимущества. Мы также погрузились в одну из самых популярных категорий NoSQL баз данных — документные базы данных, на примере MongoDB.
