
# SQL Урок 13: Вставка строк

Мы провели довольно много уроков о том, как запрашивать данные в базе данных, поэтому пришло время начать немного разбираться в схемах SQL и о том, как добавлять новые данные.

# Что такое схема?

Ранее мы описывали таблицу в базе данных как двумерный набор строк и столбцов, где столбцы являются свойствами, а строки - экземплярами сущности в таблице. В SQL  _схема базы данных_  - это то, что описывает структуру каждой таблицы и типы данных, которые может содержать каждый столбец таблицы.

Пример: Коррелированный подзапрос

Например, в нашей таблице  **Movies**  значения в столбце  _Year_  должны быть целыми числами, а значения в столбце  _Title_  - строкой.

Эта фиксированная структура позволяет базе данных быть эффективной и согласованной, несмотря на хранение миллионов или даже миллиардов строк.

# Вставка новых данных

При вставке данных в базу данных нам нужно использовать оператор  `INSERT`, который объявляет, в какую таблицу записывать, столбцы данных, которые мы заполняем, и одну или несколько строк данных для вставки. Как правило, каждая вставляемая строка данных должна содержать значения для каждого соответствующего столбца таблицы. Вы можете вставлять несколько строк одновременно, просто перечисляя их последовательно.

Инструкция Insert со значениями для всех столбцов
``` sql
INSERT  INTO mytable 
VALUES (value_or_expr, another_value_or_expr, …),
       (value_or_expr_2, another_value_or_expr_2, …), …;
```
В некоторых случаях, если у вас неполные данные и таблица содержит столбцы, которые поддерживают значения по умолчанию, вы можете вставлять строки только с теми столбцами данных, которые у вас есть, указав их явно.

Инструкция Insert с определенными столбцами
``` sql
INSERT INTO mytable 
(column, another_column, …)
VALUES (value_or_expr, another_value_or_expr, …), 
        (value_or_expr_2, another_value_or_expr_2, …), …;
```
В этих случаях количество значений должно соответствовать указанному количеству столбцов. Несмотря на то, что это более подробное описание для написания, вставка значений таким способом имеет преимущество прямой совместимости. Например, если вы добавите в таблицу новый столбец со значением по умолчанию, никакие жестко запрограммированные  `INSERT`  инструкции не должны будут изменяться в результате, чтобы учесть это изменение.

Кроме того, вы можете использовать математические и строковые выражения со значениями, которые вы вставляете.  
Это может быть полезно для обеспечения определенного формата всех вставляемых данных.

Пример инструкции Insert с выражениями
``` sql
INSERT INTO boxoffice 
(movie_id, rating, sales_in_millions)
 VALUES (1, 9.9, 283742034 / 1000000);
```

# Упражнение

В этом упражнении мы собираемся поиграть в studio executive и добавить несколько фильмов в  **Movies**  нашего портфолио. В этой таблице  **Id**  является автоматически увеличивающимся целым числом, поэтому вы можете попробовать вставить строку, в которой определены только другие столбцы.

Поскольку в следующих уроках база данных будет изменена, вам придется вручную запускать каждый запрос, когда они будут готовы к работе.
## Упражнение 13 —  Задачи

1.  Добавьте новую постановку студии,  **История игрушек 4**  в список фильмов (вы можете использовать любого режиссера)
2.  "История игрушек 4" получила признание критиков! У него был рейтинг  **8,7**, и он заработал  **340 миллионов внутри страны**  и  **270 миллионов на международном уровне**. Добавьте запись в  `BoxOffice`  таблицу.