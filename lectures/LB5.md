
## SQL Урок 4: Фильтрация и сортировка результатов запроса

Даже если данные в базе данных могут быть уникальными, результаты любого конкретного запроса могут отличаться – возьмем, к примеру, нашу таблицу фильмов, в одном году может быть выпущено много разных фильмов.  В таких случаях SQL предоставляет удобный способ отбрасывать строки, содержащие повторяющееся значение столбца, с помощью  `DISTINCT`  ключевого слова.

Выберите запрос с уникальными результатами

```sql
SELECT DISTINCT column, another_column, …
FROM mytable
WHERE _condition(s)_;
```

Поскольку ключевое слово  `DISTINCT`  удаляет дубликаты строк вслепую, в следующем уроке мы узнаем, как отбрасывать дубликаты на основе определенных столбцов, используя группировку и  `GROUP BY`  предложение.

### Упорядочивание результатов

В отличие от нашей аккуратно упорядоченной таблицы из последних нескольких уроков, большинство данных в реальных базах данных добавляются без определенного порядка столбцов.  В результате может быть трудно прочитать и понять результаты запроса, поскольку размер таблицы увеличивается до тысяч или даже миллионов строк.

Чтобы помочь с этим, SQL предоставляет способ сортировки ваших результатов по заданному столбцу в порядке возрастания или убывания, используя предложение  `ORDER BY`.

Выберите запрос с упорядоченными результатами

```sql
SELECT column, another_column, …
FROM mytable
WHERE _condition(s)_
ORDER BY column ASC/DESC;
```

Когда указано предложение  `ORDER BY`, каждая строка сортируется буквенно-цифровым способом на основе значения указанного столбца.  В некоторых базах данных вы также можете указать параметры сортировки для лучшей сортировки данных, содержащих международный текст.

### Ограничение результатов подмножеством

Другое предложение, которое обычно используется с  `ORDER BY`  предложением, - это предложения  `LIMIT`  и  `OFFSET`, которые являются полезной оптимизацией для указания базе данных подмножества результатов, которые вас интересуют.  
Параметр  `LIMIT`  уменьшит количество возвращаемых строк, а необязательный параметр  `OFFSET`  укажет, с чего начинать подсчет количества строк.

Выберите запрос с ограниченным количеством строк

```sql
SELECT column, another_column, …
FROM mytable
WHERE _condition(s)_
ORDER BY column ASC/DESC
LIMIT num_limit OFFSET num_offset;
```

Если вы думаете о веб-сайтах, таких как Reddit или Pinterest, то главная страница представляет собой список ссылок, отсортированных по популярности и времени, и каждая последующая страница может быть представлена наборами ссылок с разным смещением в базе данных.  Используя эти предложения, база данных может выполнять запросы быстрее и эффективнее, обрабатывая и возвращая только запрошенное содержимое.

>Знаете ли вы?
>Если вам интересно, когда  `LIMIT`  и  `OFFSET`  применяются относительно других частей запроса, они обычно выполняются последними после применения других предложений.  Подробнее мы коснемся этого в  уроке "Порядок выполнения" после представления еще нескольких частей запроса.

### Упражнение

В этом уроке есть несколько концепций, но все они довольно просты в применении.  Чтобы разнообразить процесс, в упражнении мы скремблировали для вас таблицу  **Movies**, чтобы лучше имитировать данные, которые вы могли бы видеть в реальной жизни.  Попробуйте использовать в своих запросах необходимые ключевые слова и предложения, представленные выше.

#### Задачи

1.  Перечислите всех режиссеров фильмов Pixar (в алфавитном порядке), без дубликатов
2.  Перечислите последние четыре выпущенных фильма Pixar (в порядке от самого последнего к самому младшему)
3.  Перечислите  **первые**  пять фильмов Pixar, отсортированных в алфавитном порядке
4.  Перечислите  **следующие**  пять фильмов Pixar, отсортированных в алфавитном порядке
