
# Урок 16 по SQL: создание таблиц

Когда у вас есть новые сущности и связи для хранения в вашей базе данных, вы можете создать новую таблицу базы данных с помощью инструкции  `CREATE TABLE`.

Инструкция Create table с необязательным ограничением таблицы и значением по умолчанию
``` sql
CREATE TABLE IF NOT EXISTS mytable (
 column _DataType_  _TableConstraint_ DEFAULT _default_value_,
 another_column _DataType_  _TableConstraint_ DEFAULT _default_value_,
  … );
```
Структура новой таблицы определяется ее  _схемой таблицы_, которая определяет последовательность столбцов. У каждого столбца есть имя, тип данных, разрешенных в этом столбце,  _необязательное_  табличное ограничение на вставляемые значения и необязательное значение по умолчанию.

Если таблица с таким именем уже существует, реализация SQL обычно выдает ошибку, поэтому, чтобы подавить ошибку и пропустить создание таблицы, если она существует, вы можете использовать предложение  `IF NOT EXISTS`  .

# Типы табличных данных

Разные базы данных поддерживают разные типы данных, но обычные типы поддерживают числовые, строковые и другие разные вещи, такие как даты, логические значения или даже двоичные данные. Вот несколько примеров, которые вы могли бы использовать в реальном коде.
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
таблица
Тип данных

Описание

`INTEGER`,  `BOOLEAN`

Целочисленные типы данных могут хранить целые целочисленные значения, такие как количество чисел или возраст. В некоторых реализациях логическое значение представлено просто как целое значение, равное 0 или 1.

`FLOAT`,  `DOUBLE`,  `REAL`

Типы данных с плавающей запятой могут хранить более точные числовые данные, такие как измерения или дробные значения. Могут использоваться разные типы в зависимости от точности с плавающей запятой, требуемой для этого значения.

`CHARACTER(num_chars)`,  `VARCHAR(num_chars)`,  `TEXT`

Текстовые типы данных могут хранить строки и текст во всевозможных локализациях. Различие между различными типами обычно сводится к повышению эффективности базы данных при работе с этими столбцами.

Типы CHARACTER и VARCHAR (символ переменной) задаются с максимальным количеством символов, которые они могут хранить (более длинные значения могут быть усечены), поэтому хранение и запрос с большими таблицами могут быть более эффективными.

`DATE`,  `DATETIME`

SQL также может хранить метки даты и времени для отслеживания временных рядов и данных о событиях. С ними может быть сложно работать, особенно при манипулировании данными в разных часовых поясах.

`BLOB`

Наконец, SQL может хранить двоичные данные в виде больших двоичных объектов прямо в базе данных. Эти значения часто непрозрачны для базы данных, поэтому вам обычно приходится хранить их с нужными метаданными для запроса к ним.
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Документы:  [MySQL](http://dev.mysql.com/doc/refman/5.6/en/data-types.html "Типы данных MySQL"),  [Postgres](http://www.postgresql.org/docs/9.4/static/datatype.html "Типы данных Postgres"),  [SQLite](https://www.sqlite.org/datatype3.html "Типы данных SQLite"),  [Microsoft SQL Server](https://msdn.microsoft.com/en-us/library/ms187752.aspx "Типы данных Microsoft SQL Server")

# Ограничения таблиц

В этом уроке мы не собираемся слишком глубоко погружаться в табличные ограничения, но для каждого столбца могут быть установлены дополнительные табличные ограничения, которые ограничивают, какие значения могут быть вставлены в этот столбец. Это неполный список, но он покажет несколько общих ограничений, которые могут оказаться полезными.
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
таблица
Ограничение

Описание

`PRIMARY KEY`

Это означает, что значения в этом столбце уникальны, и каждое значение может использоваться для идентификации отдельной строки в этой таблице.

`AUTOINCREMENT`

Для целых значений это означает, что значение автоматически заполняется и увеличивается с каждой вставкой строки. Поддерживается не во всех базах данных.

`UNIQUE`

Это означает, что значения в этом столбце должны быть уникальными, поэтому вы не можете вставить другую строку с тем же значением в этом столбце, что и в другой строке таблицы. Отличается от `ПЕРВИЧНОГО КЛЮЧА` тем, что он не обязательно должен быть ключом для строки в таблице.

`NOT NULL`

Это означает, что вставляемое значение не может быть `NULL`.

`CHECK (expression)`

Это позволяет запустить более сложное выражение для проверки правильности вставленных значений. Например, вы можете проверить, что значения положительны, или превышают определенный размер, или начинаются с определенного префикса и т.д.

`FOREIGN KEY`

Это проверка согласованности, которая гарантирует, что каждое значение в этом столбце соответствует другому значению в столбце другой таблицы.  
  
Например, если есть две таблицы, в одной из которых перечислены все сотрудники по идентификаторам, а в другой - информация об их заработной плате, "ВНЕШНИЙ КЛЮЧ" может гарантировать, что каждая строка в таблице заработной платы соответствует действительному сотруднику в основном списке сотрудников.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# Пример

Вот пример схемы для таблицы  _Movies_, которую мы до сих пор использовали на уроках.

Схема таблицы Movies
``` sql
CREATE  TABLE movies (
 id INTEGER  PRIMARY  KEY, 
 title TEXT, director TEXT,
 year  INTEGER, 
 length_minutes INTEGER );
```
# Упражнение

В этом упражнении вам нужно будет создать новую таблицу, в которую мы будем вставлять несколько новых строк.
## Упражнение 16 —  Задачи

1.  Создайте новую таблицу с именем  `Database`  со следующими столбцами:  
    
    –  `Name`  Строка (текст), описывающая имя базы данных  
    –  `Version`  Число (с плавающей запятой) последней версии этой базы данных  
    –  `Download_count`  Целочисленный подсчет количества загрузок этой базы данных  
    
    Эта таблица не имеет ограничений.